{% extends 'tasks/base.html' %}

{% block title %}–ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏ - TaskManager{% endblock %}

{% block content %}
<div style="max-width: 600px; margin: 0 auto;">
    <div class="card">
        <h2>‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∑–∞–¥–∞—á–∏</h2>
        
        <div style="background: #f0f9ff; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
            <h3 style="color: var(--primary); margin-bottom: 1rem;">{{ task.title }}</h3>
            
            <div style="display: grid; gap: 1rem;">
                <div>
                    <strong>üìù –û–ø–∏—Å–∞–Ω–∏–µ:</strong>
                    <p style="color: var(--secondary); margin: 0.5rem 0 0 0; padding: 1rem; background: white; border-radius: 6px;">
                        {{ task.description }}
                    </p>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div>
                        <strong>üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫:</strong>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark);">{{ task.assigned_to.get_full_name|default:task.assigned_to.username }}</p>
                    </div>
                    
                    <div>
                        <strong>üìÖ –°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:</strong>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark);">{{ task.due_date }}</p>
                    </div>
                </div>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                    <div>
                        <strong>üí∞ –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ:</strong>
                        <p style="margin: 0.5rem 0 0 0; color: var(--success); font-weight: bold; font-size: 1.2rem;">
                            {{ task.payment_amount }} —Ä—É–±.
                        </p>
                    </div>
                    
                    <div>
                        <strong>üìÖ –î–∞—Ç–∞ —Å–¥–∞—á–∏:</strong>
                        <p style="margin: 0.5rem 0 0 0; color: var(--dark);">
                            {{ task.submitted_date|date:"d.m.Y H:i" }}
                        </p>
                    </div>
                </div>
                
                {% if task.tags %}
                <div>
                    <strong>üè∑Ô∏è –Ø—Ä–ª—ã–∫–∏:</strong>
                    <div style="margin-top: 0.5rem;">
                        {% for tag in task.tags.split %}
                        <span class="status-badge" style="background: #e2e8f0; margin-right: 0.5rem;">{{ tag }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}
            </div>
        </div>

        <div style="background: #d1fae5; border: 1px solid #a7f3d0; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem;">
            <h3 style="color: #065f46; margin-bottom: 1rem;">üí∞ –ù–∞—á–∏—Å–ª–µ–Ω–∏–µ –≤–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏—è</h3>
            <p style="color: #065f46; margin: 0;">
                –ü–æ—Å–ª–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è, —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É <strong>{{ task.assigned_to.get_full_name|default:task.assigned_to.username }}</strong> 
                –±—É–¥–µ—Ç –Ω–∞—á–∏—Å–ª–µ–Ω–æ <strong>{{ task.payment_amount }} —Ä—É–±.</strong> –Ω–∞ –±–∞–ª–∞–Ω—Å.
            </p>
            <p style="color: #065f46; margin: 1rem 0 0 0;">
                –¢–µ–∫—É—â–∏–π –±–∞–ª–∞–Ω—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞: <strong>{{ task.assigned_to.balance }} —Ä—É–±.</strong>
            </p>
            <p style="color: #065f46; margin: 0.5rem 0 0 0; font-size: 0.9rem;">
                –ü–æ—Å–ª–µ –Ω–∞—á–∏—Å–ª–µ–Ω–∏—è: <strong>{{ task.assigned_to.balance|add:task.payment_amount }} —Ä—É–±.</strong>
            </p>
        </div>

        <div style="background: #fef3c7; border: 1px solid #fde68a; padding: 1rem; border-radius: 8px; margin-bottom: 1.5rem;">
            <p style="margin: 0; color: #92400e;">
                ‚ö†Ô∏è <strong>–í–Ω–∏–º–∞–Ω–∏–µ:</strong> –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –Ω–µ–ª—å–∑—è –æ—Ç–º–µ–Ω–∏—Ç—å. –°—Ä–µ–¥—Å—Ç–≤–∞ –±—É–¥—É—Ç —Å—Ä–∞–∑—É –Ω–∞—á–∏—Å–ª–µ–Ω—ã –Ω–∞ –±–∞–ª–∞–Ω—Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞.
            </p>
        </div>

        <form method="post">
            {% csrf_token %}
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button type="submit" class="btn btn-success" style="flex: 1;">
                    ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∏ –Ω–∞—á–∏—Å–ª–∏—Ç—å {{ task.payment_amount }} —Ä—É–±.
                </button>
                <a href="{% url 'dashboard' %}" class="btn" style="flex: 1; background: var(--border); text-align: center;">
                    ‚ùå –û—Ç–º–µ–Ω–∞
                </a>
            </div>
        </form>
    </div>
</div>
{% endblock %}