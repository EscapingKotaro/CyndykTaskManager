{% extends 'tasks/base.html' %}

{% block title %}–ó–∞–¥–∞—á–∞: {{ task.title }} - TaskManager{% endblock %}

{% block content %}
<div class="card">
    <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 2rem;">
        <h1>üìã –ó–∞–¥–∞—á–∞: {{ task.title }}</h1>
        <div style="display: flex; gap: 1rem;">
            <a href="{% url 'edit_task' task.id %}" class="btn btn-warning">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
            <a href="{% url 'task_management' %}" class="btn btn-secondary">‚Üê –ù–∞–∑–∞–¥ –∫ —Å–ø–∏—Å–∫—É</a>
        </div>
    </div>

    <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 2rem;">
        <!-- –û—Å–Ω–æ–≤–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è -->
        <div>
            <div style="background: #f8fafc; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                <h3>üìù –û–ø–∏—Å–∞–Ω–∏–µ</h3>
                <p style="white-space: pre-wrap; color: var(--dark);">{{ task.description }}</p>
            </div>

            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem;">
                <div style="background: white; padding: 1rem; border-radius: 8px; border: 1px solid var(--border);">
                    <strong>üë§ –°–æ—Ç—Ä—É–¥–Ω–∏–∫</strong>
                    <p style="margin: 0.5rem 0 0 0; font-size: 1.1rem;">{{ task.assigned_to.get_display_name }}</p>
                </div>
                
                <div style="background: white; padding: 1rem; border-radius: 8px; border: 1px solid var(--border);">
                    <strong>üìÖ –°—Ä–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è</strong>
                    <p style="margin: 0.5rem 0 0 0; font-size: 1.1rem;">{{ task.due_date }}</p>
                </div>
                
                <div style="background: white; padding: 1rem; border-radius: 8px; border: 1px solid var(--border);">
                    <strong>üí∞ –í–æ–∑–Ω–∞–≥—Ä–∞–∂–¥–µ–Ω–∏–µ</strong>
                    <p style="margin: 0.5rem 0 0 0; font-size: 1.1rem; color: var(--success);">
                        {% if task.payment_amount == 0 %}
                            ‚Äî
                        {% else %}
                            {{ task.payment_amount }} —Ä—É–±.
                        {% endif %}
                    </p>
                </div>
            </div>
        </div>

        <!-- –°—Ç–∞—Ç—É—Å –∏ –¥–µ–π—Å—Ç–≤–∏—è -->
        <div>
            <div style="background: #f0f9ff; padding: 1.5rem; border-radius: 12px; margin-bottom: 1.5rem;">
                <h3>üìä –°—Ç–∞—Ç—É—Å –∑–∞–¥–∞—á–∏</h3>
                <div style="text-align: center; padding: 1rem;">
                    <span class="status-badge status-{{ task.status }}" style="font-size: 1.2rem; padding: 0.8rem 1.5rem;">
                        {{ task.get_status_display }}
                    </span>
                </div>
                
                {% if task.status == 'submitted' %}
                <div style="text-align: center; margin-top: 1rem;">
                    <a href="{% url 'complete_task' task.id %}" class="btn btn-success" style="width: 100%;">
                        ‚úÖ –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ
                    </a>
                    <small style="color: var(--secondary); display: block; margin-top: 0.5rem;">
                        –°–¥–∞–Ω–∞ –Ω–∞ –æ—Ç—á–µ—Ç: {{ task.submitted_date|date:"d.m.Y H:i" }}
                    </small>
                </div>
                {% endif %}
            </div>

            <div style="background: #fff3cd; padding: 1.5rem; border-radius: 12px;">
                <h3>‚ö° –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h3>
                <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                    <a href="{% url 'edit_task' task.id %}" class="btn btn-warning">‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</a>
                    <a href="{% url 'delete_task' task.id %}" class="btn btn-danger">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –∑–∞–¥–∞—á—É</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}